<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="深思博文">
    <meta name="keyword"  content="深思博文">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        MySQL体系结构和存储引擎 - 深思博文 | Neo&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <!--<i> Talk is cheap, show me the article. </i> -->
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
	<!--
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Hyw</i>
        </div>
    </div>
	--> 
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库和实例"><span class="toc-text">数据库和实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL体系结构"><span class="toc-text">MySQL体系结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL存储引擎"><span class="toc-text">MySQL存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#InnoDB存储引擎"><span class="toc-text">InnoDB存储引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyISAM存储引擎"><span class="toc-text">MyISAM存储引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Memory存储引擎"><span class="toc-text">Memory存储引擎</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#小结"><span class="toc-text">小结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol>
</div>

    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <!-- <i> Talk is cheap, show me the article. </i> -->
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        MySQL体系结构和存储引擎
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2017-11-08 22:33:23</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#读书笔记" title="读书笔记">读书笔记</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#MySQL" title="MySQL">MySQL</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#存储引擎" title="存储引擎">存储引擎</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h2 id="数据库和实例"><a href="#数据库和实例" class="headerlink" title="数据库和实例"></a>数据库和实例</h2><p>这是两个比较容易混淆的概念：</p>
<ul>
<li>数据库：物理操作系统文件或其他形式文件类型的集合</li>
<li>实例：MySQL数据库有后台线程及一个共享区组成</li>
</ul>
<p>在MySQL数据库中，这两者的关系通常是一一对应的，即一个数据库对应一个实例，但是在集群情况下，会存在多个实例对应一个数据库的情况。</p>
<p>MySQL是一个被设计为单进程多线程的数据库。MySQL在启动的时候会按一定的顺序查找配置文件， 在存在多份配置文件的时候<a id="more"></a>，后加载的配置会覆盖先加载的配置；如果没有找到配置文件，则会按照编译时的默认参数设置启动实例。配置搜索顺序可以通过下面的方式查询：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gary@x1:~$ mysql --<span class="keyword">help</span> | <span class="keyword">grep</span> my.<span class="keyword">cnf</span></span><br><span class="line">                      order of preference, my.<span class="keyword">cnf</span>, $MYSQL_TCP_PORT,</span><br><span class="line">/etc/my.<span class="keyword">cnf</span> /etc/mysql/my.<span class="keyword">cnf</span> ~/.my.<span class="keyword">cnf</span></span><br></pre></td></tr></table></figure>
<h2 id="MySQL体系结构"><a href="#MySQL体系结构" class="headerlink" title="MySQL体系结构"></a>MySQL体系结构</h2><p>在学习MySQL体系结构之前，再次辨识下数据库和实例的概念。从概念上说，数据库是文件的概念，是依照某种数据模型组织起来的并存放于二级存储器中的数据集合；数据库实例是程序，是位于用户与操作系统之间的一层数据管理软件，用户对于数据库数据的任何操作，包括数据库定义、数据查询、数据库运行控制等都是在数据实例下进。</p>
<p><img src="" alt=""></p>
<p>数据库主要由连接池组件、管理和工具组件、SQL接口组件、查询分析器组件、优化器组件、缓冲组件、插件式存储引擎、物理文件。</p>
<p>存储引擎是基于表，而非数据库。</p>
<h2 id="MySQL存储引擎"><a href="#MySQL存储引擎" class="headerlink" title="MySQL存储引擎"></a>MySQL存储引擎</h2><p>MySQL插件式的存储引擎体系结构是它区别于其他数据库的一个重要方面，下面介绍下集中常见的存储引擎。</p>
<h3 id="InnoDB存储引擎"><a href="#InnoDB存储引擎" class="headerlink" title="InnoDB存储引擎"></a>InnoDB存储引擎</h3><p>InnoDB存储引擎支持事务，设计目标主要面向于<code>在线事务处理</code>（OLTP）应用，其主要特点是行锁设计、支持外键。InnoDB存储引擎将数据放在一个逻辑的表空间中，由InnoDB自行管理。从MySQL4.1起，它可以通过一个个独立的ibd文件隔离每个InnoDB存储引擎的表，也支持使用裸设备来建立其表空间。</p>
<p>InnoDB通过<code>多版本并发控制</code>(MVCC)来获得高并发行，并且实现了SQL标准的4种<code>隔离级别</code>，默认为可重复读(REPEATABLE)。同时使用next-key locking的策略来避免<code>幻读</code>现象的产生。</p>
<p>InnoDB存储引擎采用了<code>聚集</code>(clustered)的方式来存储表中的数据，每张表的存储都是按主键的顺序进行存放。如果没有显式定义主键，存储引会为每一行生成一个6字节的ROWID，并以此为主键。</p>
<h3 id="MyISAM存储引擎"><a href="#MyISAM存储引擎" class="headerlink" title="MyISAM存储引擎"></a>MyISAM存储引擎</h3><p>MyISAM存储引擎不支持事务、表锁设计，但支持<code>全文索引</code>，主要面向一些<code>联机分析处理</code>（OLAP）数据库应用，它的缓冲池只缓存索引文件，而不缓冲数据文件。</p>
<h3 id="Memory存储引擎"><a href="#Memory存储引擎" class="headerlink" title="Memory存储引擎"></a>Memory存储引擎</h3><p>Memoery存储引擎（之前称HEAP引擎）将表中的数据存在内存中，如果数据库重启或者发生崩溃，表中的数据都会丢失。它适用于存储临时数据的临时表，以及数据仓库中的维度表。Memory存储引擎默认适用哈希索引，而非B+树索引。</p>
<p>Memory存储索引速度非常快，但只支持表锁，并发性能差，并且不支持TEXT和BLOB列类型；存储varchar类型时按照char的方式进行，浪费内存。</p>
<p>其他存储引擎，比如Archive存储引擎可以提供高速的插入和压缩功能，Maria存储引擎用于取代原有的MyISAM存储引擎等。</p>
<p>MyISAM、InnoDB(1.2)和Sphinx存储引擎都支持全文索引。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>本章主要从宏观上讲述了MySQL的体系结构，重点介绍了几种应用非常广泛的存储引擎，比如InnoDB、MyISAM、NDB、Memory等。另外还介绍了MySQL的启动和登录，不同平台(系统)在操作上略有不同，但是MySQL数据库确是保持一致的。<br>理解数据库和数据库实例的定义与关系，对于学习和使用MySQL都是非常有益的。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li>《MySQL技术内幕·InnoDB存储引擎》</li>
</ul>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="/img/eth.png">
        <p> 感谢支持(ETH:0xB0CAC88b5B5F893dD05aa46F0f7d9708C4dAFA3b) </p>
    </div>
</div>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        <li>
            <a target="_blank" href="https://twitter.com/shallotsh">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-twitter"></i>
                            </span>
            </a>
        </li>
        
        

        
        <li>
            <a target="_blank" href="http://weibo.com/indexdance">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        

        
        <li>
            <a target="_blank"  href="https://github.com/shallotsh">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://www.linkedin.com/in/亚武-黄-728a37101">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-linkedin"></i>
                            </span>
            </a>
        </li>
        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://www.github.com">GitHub</a></span>
        <span>/</span>
        
        <span><a href="http://ifeve.com/">并发编程网</a></span>
        <span>/</span>
        
        <span><a href="https://tech.meituan.com/">美团技术博客</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Hosted by <a href="https://pages.coding.me" style="font-weight: bold;">Coding Pages</a> Created By <a href="https://hexo.io/">Hexo</a> 
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/gitment.js"></script>
<script>
    var gitment = new Gitment({
        id: 'MySQL体系结构和存储引擎',
        owner: 'shallotsh',
        repo: 'shallotsh.github.io',
        oauth: {
            client_id: 'b3260fcb1f223a89bf9c',
            client_secret: '989da3c54db88efce806e490362c800efe7d886f',
        },
    })
    gitment.render('comment-container')
</script>


</html>
